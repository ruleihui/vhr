(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c1dff3e8"],{2209:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"SysHr"},[i("div",{staticClass:"SysHrHeader"},[i("el-input",{attrs:{"prefix-icon":"el-icon-search",size:"small",clearable:!0,placeholder:"默认展示部分用户,可通过用户名搜索更多用户"},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),i("el-button",{attrs:{size:"small",icon:"el-icon-search",type:"primary"},on:{click:e.search}},[e._v("搜索")])],1),i("div",{staticClass:"SysHrBody"},e._l(e.hrs,(function(t){return i("el-card",{key:t.id,staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v(e._s(t.name))]),i("el-button",{staticStyle:{float:"right",padding:"3px 0",color:"red"},attrs:{icon:"el-icon-delete",type:"text"},on:{click:function(i){return e.deleteById(t)}}})],1),i("div",{staticClass:"hrContent"},[i("div",{staticClass:"hrImage"},[i("img",{attrs:{src:t.userface}})]),i("div",{staticClass:"hrInfo"},[i("div",[i("el-tag",[e._v("用户名")]),e._v(" "+e._s(t.username)+" ")],1),i("div",[i("el-tag",[e._v("手机号")]),e._v(" "+e._s(t.phone)+" ")],1),i("div",[i("el-tag",[e._v("座机号")]),e._v(" "+e._s(t.telephone)+" ")],1),i("div",[i("el-tag",[e._v("地址")]),e._v(" "+e._s(t.address)+" ")],1),i("div",[i("el-tag",[e._v("是否启用")]),i("el-switch",{attrs:{"active-text":"启用","inactive-text":"禁用","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(i){return e.enableChange(t)}},model:{value:t.enabled,callback:function(i){e.$set(t,"enabled",i)},expression:"hr.enabled"}})],1),i("div",{staticClass:"hrRole"},[i("el-tag",[e._v("用户角色")]),e._l(t.roles,(function(t){return i("el-tag",{key:t.id,attrs:{type:"success"}},[e._v(" "+e._s(t.nameZh)+" ")])})),i("el-popover",{attrs:{title:"角色列表",placement:"right",width:"10",trigger:"click"},on:{hide:function(i){return e.hidePop(t)}}},[i("el-select",{attrs:{multiple:!0,placeholder:"请选择"},model:{value:t.selectValues,callback:function(i){e.$set(t,"selectValues",i)},expression:"hr.selectValues"}},e._l(e.roles,(function(e){return i("el-option",{key:e.name,attrs:{label:e.nameZh,value:e.id}})})),1),i("el-button",{attrs:{slot:"reference",icon:"el-icon-more",type:"text"},slot:"reference"})],1)],2),i("div",[i("el-tag",[e._v("备注")]),e._v(" "+e._s(t.remark)+" ")],1)])])])})),1)])},r=[],s=(i("7db0"),i("c740"),i("4160"),i("d81d"),i("a434"),i("159b"),{name:"SysHr",data:function(){return{keyword:"",hrs:[],roles:[],searchLock:!1}},mounted:function(){this.initHr(),this.initRoles()},methods:{search:function(){var e=this;if(!this.searchLock||this.keyword)return this.keyword?void this.$axios.execute("get","/system/hr?username="+this.keyword).then((function(t){t&&(e.hrs=t,e.searchLock=!1)})):(this.initHr(),void(this.searchLock=!0))},deleteById:function(e){var t=this,i=function(){return t.$axios.execute("delete","/system/hr/"+e.id).then((function(i){if(i){var n=t.hrs.findIndex((function(t){return t.id==e.id}));t.hrs.splice(n,1)}}))};this.utils.deleteConfirm(i)},initHr:function(){var e=this;this.$axios.execute("get","/system/hr").then((function(t){t&&(t.forEach((function(e){return e.enabled=1==e.enabled})),t.forEach((function(e){e.selectValues=e.roles.map((function(e){return e.id}))})),e.hrs=t)}))},initRoles:function(){var e=this;this.$axios.execute("get","/sys/basic/permission").then((function(t){t&&(e.roles=t)}))},hidePop:function(e){var t=this,i=e.roles.map((function(e){return e.id}));if(!this.utils.same(i,e.selectValues)){e.roles=[],e.selectValues.forEach((function(i){return e.roles.push(t.roles.find((function(e){return e.id==i})))}));var n={id:e.id,roles:e.roles};this.$axios.execute("put","/system/hr/roles",n).then((function(e){}))}},enableChange:function(e){var t={id:e.id,enabled:e.enabled?1:0};this.$axios.executeArgs("put","/system/hr",t)}}}),a=s,o=(i("e3b0"),i("2877")),c=Object(o["a"])(a,n,r,!1,null,"fe7ac5a6",null);t["default"]=c.exports},"83b5":function(e,t,i){},a434:function(e,t,i){"use strict";var n=i("23e7"),r=i("23cb"),s=i("a691"),a=i("50c4"),o=i("7b0b"),c=i("65f0"),l=i("8418"),d=i("1dde"),u=i("ae40"),h=d("splice"),f=u("splice",{ACCESSORS:!0,0:0,1:2}),v=Math.max,p=Math.min,m=9007199254740991,y="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!h||!f},{splice:function(e,t){var i,n,d,u,h,f,b=o(this),g=a(b.length),x=r(e,g),_=arguments.length;if(0===_?i=n=0:1===_?(i=0,n=g-x):(i=_-2,n=p(v(s(t),0),g-x)),g+i-n>m)throw TypeError(y);for(d=c(b,n),u=0;u<n;u++)h=x+u,h in b&&l(d,u,b[h]);if(d.length=n,i<n){for(u=x;u<g-n;u++)h=u+n,f=u+i,h in b?b[f]=b[h]:delete b[f];for(u=g;u>g-n+i;u--)delete b[u-1]}else if(i>n)for(u=g-n;u>x;u--)h=u+n-1,f=u+i-1,h in b?b[f]=b[h]:delete b[f];for(u=0;u<i;u++)b[u+x]=arguments[u+2];return b.length=g-n+i,d}})},c740:function(e,t,i){"use strict";var n=i("23e7"),r=i("b727").findIndex,s=i("44d2"),a=i("ae40"),o="findIndex",c=!0,l=a(o);o in[]&&Array(1)[o]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!l},{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),s(o)},d81d:function(e,t,i){"use strict";var n=i("23e7"),r=i("b727").map,s=i("1dde"),a=i("ae40"),o=s("map"),c=a("map");n({target:"Array",proto:!0,forced:!o||!c},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},e3b0:function(e,t,i){"use strict";i("83b5")}}]);
//# sourceMappingURL=chunk-c1dff3e8.6d4e919f.js.map